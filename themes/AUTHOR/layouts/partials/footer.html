<!-- themes/AUTHOR/layouts/partials/footer.html -->
<div class="footer-container">
    <div class="footer-top">
      <div class="footer-symbol">⟁⟡⫷⧖⧗⫸⟡⟁</div>
      <div class="footer-tagline">Neuro-Digital Enlightenment</div>
    </div>
    
    <div class="footer-middle">
      <div class="footer-section">
        <h3 class="footer-heading">Explore</h3>
        <ul class="footer-links">
          <li><a href="/">Home</a></li>
          <li><a href="/books/">The Protocol</a></li>
          <li><a href="/stories/">Koans</a></li>
          <li><a href="/audio/">Simulations</a></li>
          <li><a href="/posts/">Dharma Log</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3 class="footer-heading">Connect</h3>
        <ul class="footer-social">
          <li>
            <a href="https://twitter.com/zekusmaximus" class="social-link twitter" target="_blank" rel="noopener noreferrer">
              <span class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path>
                </svg>
              </span>
              <span class="social-name">Twitter</span>
            </a>
          </li>
          <li>
            <a href="https://github.com/zekusmaximus" class="social-link github" target="_blank" rel="noopener noreferrer">
              <span class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
              </span>
              <span class="social-name">GitHub</span>
            </a>
          </li>
          <li>
            <a href="mailto:jeff@zyjeski.com" class="social-link email">
              <span class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
              </span>
              <span class="social-name">Email</span>
            </a>
          </li>
          <li>
            <a href="https://instagram.com/zekusmaximus" class="social-link instagram" target="_blank" rel="noopener noreferrer">
              <span class="social-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                  <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
              </span>
              <span class="social-name">Instagram</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3 class="footer-heading">Subscribe</h3>
        <div class="footer-newsletter">
          <p>Join the cybernetic sangha for updates and digital koans.</p>
          
          <!-- Custom Form with MailerLite API Integration -->
          <div id="newsletter-form-container">
            <form id="newsletter-form" class="newsletter-form">
              <input type="email" name="email" id="subscriber-email" placeholder="Enter your email" aria-label="Email for newsletter" required>
              <button type="submit">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="22" y1="2" x2="11" y2="13"></line>
                  <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
              </button>
            </form>
            <div id="form-message" class="form-message"></div>
          </div>
          
          <!-- JavaScript for form submission -->
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const form = document.getElementById('newsletter-form');
              const messageDiv = document.getElementById('form-message');
              
              form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('subscriber-email').value;
                const formContainer = document.getElementById('newsletter-form-container');
                
                // Show loading indicator
                messageDiv.innerHTML = '<div class="loading-indicator"><span></span><span></span><span></span></div>';
                messageDiv.style.display = 'block';
                
                // Prepare data for MailerLite
                const data = {
                  email: email,
                  fields: {},
                  groups: ["138542836936083268"] // Replace with your actual group ID
                };
                
                // Send to Netlify function
                fetch('/api/subscribe', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(data => {
                  if (data.success) {
                    // Success message
                    form.style.display = 'none';
                    messageDiv.innerHTML = '<div class="success-message"><h4>Thank you for joining!</h4><p>Check your inbox for a confirmation message.</p></div>';
                  } else {
                    // Error message
                    messageDiv.innerHTML = `<div class="error-message"><p>${data.message || 'An error occurred. Please try again.'}</p></div>`;
                  }
                })
                .catch(error => {
                  // Network error
                  messageDiv.innerHTML = '<div class="error-message"><p>Connection error. Please try again later.</p></div>';
                  console.error('Error:', error);
                });
              });
            });
          </script>
          
          <!-- Styles for the custom form -->
          <style>
            .form-message {
              margin-top: 1rem;
              display: none;
            }
            
            .loading-indicator {
              display: flex;
              justify-content: center;
              gap: 0.5rem;
            }
            
            .loading-indicator span {
              width: 8px;
              height: 8px;
              border-radius: 50%;
              background: #00ffcc;
              animation: pulse 1.4s infinite ease-in-out;
            }
            
            .loading-indicator span:nth-child(2) {
              animation-delay: 0.2s;
            }
            
            .loading-indicator span:nth-child(3) {
              animation-delay: 0.4s;
            }
            
            @keyframes pulse {
              0%, 100% {
                opacity: 0.2;
                transform: scale(0.8);
              }
              50% {
                opacity: 1;
                transform: scale(1.2);
              }
            }
            
            .success-message {
              background: rgba(0, 255, 204, 0.1);
              border: 1px solid rgba(0, 255, 204, 0.3);
              border-radius: 4px;
              padding: 1rem;
              text-align: center;
            }
            
            .success-message h4 {
              color: #00ffcc;
              font-family: 'Orbitron', sans-serif;
              margin-bottom: 0.5rem;
              font-size: 1.2rem;
            }
            
            .success-message p {
              color: #fff;
              margin: 0;
            }
            
            .error-message {
              background: rgba(255, 0, 102, 0.1);
              border: 1px solid rgba(255, 0, 102, 0.3);
              border-radius: 4px;
              padding: 1rem;
              text-align: center;
            }
            
            .error-message p {
              color: #ff3366;
              margin: 0;
            }

            /* Fix for footer layout */
  .footer-middle {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
    width: 100%;
  }
  
  .footer-bottom {
    clear: both;
    width: 100%;
    text-align: center;
    padding-top: 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    margin-top: 1rem;
  }
  
  /* Ensure newsletter form container doesn't break layout */
  .footer-newsletter {
    width: 100%;
  }
  
  /* Adjust newsletter form to stay in its container */
  #newsletter-form-container {
    width: 100%;
    max-width: 100%;
  }
  
  /* Make sure the form doesn't float outside its container */
  .newsletter-form {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
  
  /* Ensure the section containers are properly cleared */
  .footer-section {
    width: 100%;
    box-sizing: border-box;
  }
  
  /* Media queries for better mobile experience */
  @media (max-width: 768px) {
    .footer-middle {
      grid-template-columns: 1fr;
    }
    
    /* Force the bottom footer to clear all floats */
    .footer-bottom {
      display: block;
      clear: both;
      float: none;
      position: relative;
    }
  }
          </style>
        </div>
      </div>
    
    <div class="footer-bottom">
      <div class="footer-copyright">
        <p>&copy; {{ now.Year }} Jeffrey A. Zyjeski. All rights reserved.</p>
        <p class="footer-mantra">The code is not the mind; the mind is not the code.</p>
      </div>
      
      <!-- Animated circuit diagram footer decoration -->
      <div class="footer-decoration">
        <svg width="100%" height="30" viewBox="0 0 1000 30" xmlns="http://www.w3.org/2000/svg">
          <!-- Circuit lines -->
          <path class="circuit-path" d="M0,15 L50,15 C60,15 60,5 70,5 L130,5 C140,5 140,15 150,15 L250,15 C260,15 260,25 270,25 L330,25 C340,25 340,15 350,15 L450,15 C460,15 460,5 470,5 L530,5 C540,5 540,15 550,15 L650,15 C660,15 660,25 670,25 L730,25 C740,25 740,15 750,15 L850,15 C860,15 860,5 870,5 L930,5 C940,5 940,15 950,15 L1000,15" stroke="#00ffcc" stroke-width="1" fill="none" />
          
          <!-- Circuit nodes -->
          <circle class="circuit-node" cx="50" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="150" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="250" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="350" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="450" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="550" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="650" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="750" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="850" cy="15" r="3" fill="#00ffcc" />
          <circle class="circuit-node" cx="950" cy="15" r="3" fill="#00ffcc" />
        </svg>
      </div>
    </div>
  </div>
          